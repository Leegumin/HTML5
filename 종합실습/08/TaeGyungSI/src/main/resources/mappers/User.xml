<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "com.example.taegyungsi.dao.UserDao">

    <select id = "findById"
            parameterType = "String"
            resultType = "User">
        SELECT ID
             , USERNAME
             , EMAIL
             , PASSWORD
             , ROLES
             , DELETE_YN
             , INSERT_TIME
             , UPLOAD_TIME
             , DELETE_TIME
        FROM TB_USER_JWT
        WHERE ID = #{id}
          AND DELETE_YN = 'N'
    </select>

    <!--    -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
    <select id = "findByTitleContaining"
            parameterType = "String"
            resultType = "com.example.taegyungsi.model.User">
        SELECT ID
             , TITLE
             , DESCRIPTION
             , PUBLISHED
             , DELETE_YN
             , INSERT_TIME
             , UPDATE_TIME
             , DELETE_TIME
        FROM TB_USER_JWT
        WHERE DELETE_YN = 'N'
          AND TITLE LIKE '%' || #{title} || '%'
    </select>

    <select id = "findAll"
            resultType = "User">
        SELECT ID
             , TITLE
             , DESCRIPTION
             , PUBLISHED
             , DELETE_YN
             , INSERT_TIME
             , UPDATE_TIME
             , DELETE_TIME
        FROM TB_USER_JWT
        WHERE DELETE_YN = 'N'
    </select>

    <select id = "findById"
            parameterType = "long"
            resultType = "com.example.taegyungsi.model.User">
        SELECT ID
             , TITLE
             , DESCRIPTION
             , PUBLISHED
             , DELETE_YN
             , INSERT_TIME
             , UPDATE_TIME
             , DELETE_TIME
        FROM TB_USER_JWT
        WHERE DELETE_YN = 'N'
          AND ID = #{id}
    </select>

    <insert id = "insertUser"
            parameterType = "com.example.taegyungsi.model.User">
        INSERT INTO TB_USER_JWT ( ID
                                , TITLE
                                , DESCRIPTION
                                , PUBLISHED
                                , INSERT_TIME)
        VALUES ( SQ_USER_JWT.NEXTVAL
               , #{title}
               , #{description}
               , 'Y'
               , TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS'))
    </insert>

    <update id = "updateUser"
            parameterType = "com.example.taegyungsi.model.User">
        UPDATE TB_USER_JWT
        SET TITLE       = #{title}
          , DESCRIPTION = #{description}
          , PUBLISHED   = DECODE(#{published}, 'true', 'Y', 'N')
          , UPDATE_TIME = TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS')
        WHERE ID = #{id}
    </update>

    <update id = "deleteById"
            parameterType = "long">
        UPDATE TB_USER_JWT
        SET DELETE_YN   = 'Y'
          , DELETE_TIME = TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS')
        WHERE ID = #{id}
    </update>

    <update id = "deleteAll">
        UPDATE TB_USER_JWT
        SET DELETE_YN   = 'Y'
          , DELETE_TIME = TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS')
    </update>

</mapper>
